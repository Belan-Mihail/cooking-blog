{% extends 'base.html' %} {% block content %}
{% load crispy_forms_tags %}

<h2 class="post-title-detail">{{ post.cooking_recipe_title }}</h2>

<article class="post-detail">
    
    <div class="image-container-detail-page">
        {% if "placeholder" in post.cooking_recipe_image.url %}
        <img class="card-img-detail-page"
            src="https://res.cloudinary.com/dtnxukqxl/image/upload/v1696967358/project/lgzihdcgkyvtnpwmpugr.jpg">
        {% else %}
        <img class="card-img-detail-page" src=" {{ post.cooking_recipe_image.url }}">
        {% endif %}
    </div>

    <p> {{ post.cooking_recipe_body | safe | linebreaksbr }}</p>
    
    <hr>

    <p class="blog-post-meta text-muted"> Post creaeted {{ post.created_on}} by 
        <a class="link-accent-color" href="#"><strong>{{ post.cooking_recipe_author}}</strong></a>
    </p>
    
    <p class="card-text text-muted h6"> Post updated {{ post.updated_on}} </p>
    <strong class="text-secondary"><i class="far fa-heart"></i> {{ post.number_of_likes }} </strong>

</article>

<div class="comments-row d-flex">
    <div class="col-md-8">
        <h3><strong>Comments:</strong></h3>
        <div class="Ñomments-card">
            {% for comment in comments %}
            <div class="comments">
                <p class="comment-title">
                    
                    ({{ comment.created_on }})
                    <a href="#"><strong>{{ comment.name }}</strong></a> wrote:
                </p>
                
                <p>{{ comment.body }}</p>
                <hr>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="col-md-4">
        <div class="post-comments-card">
            {% if commented %}
            <div class="alert alert-success" role="alert">
                Your comment is awaiting approval
            </div>

            <h3>Leave a comment:</h3>
            <p>Posting as: {{ user.username }}</p>
            <form method="post" class="comments-form">
                {{ comment_form | crispy }}
                {% csrf_token %}
                <button type="submit" class="btn submit-comments">Submit</button>
            </form>
            {% else %}

            {% if user.is_authenticated %}

            <h3>Leave a comment:</h3>
            <p>Posting as: {{ user.username }}</p>
            <form method="post" class="comments-form">
                {{ comment_form | crispy }}
                {% csrf_token %}
                <button type="submit" class="btn submit-comments">Submit</button>
            </form>
            {% endif %}
            {% endif %}
        </div> 
    </div> 
</div>
{%endblock%}